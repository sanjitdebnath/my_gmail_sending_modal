<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visa Application Form</title>
    <!-- Include Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<style>
    body {
        background-color: rgb(5, 5, 52);
    }

    .bgColor {
        box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.2);
        border-radius: 10px;
        background-color: white;
    }

    .loader-container {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        /* Semi-transparent background */
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 9999;
    }

    .loader {
        border: 5px solid #f3f3f3;
        /* Light gray border */
        border-top: 5px solid #3498db;
        /* Blue border on top for spinning effect */
        border-radius: 50%;
        width: 50px;
        height: 50px;
        animation: spin 2s linear infinite;
        /* Spin animation */
    }

    @keyframes spin {
        0% {
            transform: rotate(0deg);
        }

        100% {
            transform: rotate(360deg);
        }
    }

    /* Styles to apply the blur effect to the background */
    body.blurred {
        filter: blur(5px);
        /* Adjust the blur amount as needed */
        transition: filter 0.3s ease-in-out;
    }
</style>

<body>
    <!-- Success message -->
    <div class="modal fade" id="success-modal" tabindex="-1" aria-labelledby="success-modal-label" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content d-flex">
                <div class="modal-body bg-success-subtle rounded">
                    Your message has been sent successfully.
                    <button type="button" class="btn-close float-end shadow-none" data-dismiss="modal"
                        aria-label="Close"></button>
                </div>
            </div>
        </div>
    </div>

    <div class="container w-50 bgColor my-5 p-3">
        <!-- <h2 class="mb-5 mt-2 text-center">Visa Application Form</h2> -->
        <form id="myForm">
            <!-- Email -->
            <div class="mb-4">
                <label for="email" class="form-label">Email <span class="text-danger">*</span></label>
                <input type="email" class="form-control" id="email" name="email" placeholder="Enter your email"
                    required>
            </div>

            <!-- Full Name -->
            <div class="mb-4">
                <label for="fullname" class="form-label">Full Name <span class="text-danger">*</span></label>
                <input type="text" class="form-control" id="fullname" name="fullname" placeholder="Enter your full name"
                    required>
            </div>

            <!-- Age -->
            <div class="mb-4">
                <label for="age" class="form-label">Age <span class="text-danger">*</span></label>
                <input type="number" class="form-control" id="age" name="age" placeholder="Enter your age" required>
            </div>

            <!-- Highest Level of Education -->
            <div class="mb-4">
                <label for="education" class="form-label">Highest Level of Education <span
                        class="text-danger">*</span></label>
                <input type="text" class="form-control" id="education" name="education"
                    placeholder="Enter your highest education level" required>
            </div>

            <!-- Institute where you completed your highest level of education -->
            <div class="mb-4">
                <label for="institute" class="form-label">Institute where you completed your highest level of education
                    <span class="text-danger">*</span></label>
                <input type="text" class="form-control" id="institute" name="institute"
                    placeholder="Enter the name of your institute" required>
            </div>

            <!-- What did you study -->
            <div class="mb-4">
                <label for="study" class="form-label">What did you study <span class="text-danger">*</span></label>
                <input type="text" class="form-control" id="study" name="study" placeholder="Enter your field of study"
                    required>
            </div>

            <!-- Do you have any relevant work experience? -->
            <div class="mb-4">
                <label for="work-experience" class="form-label">Do you have any relevant work experience? <span
                        class="text-danger">*</span></label>
                <select class="form-select" id="work-experience" name="work_experience" required>
                    <option value="" disabled selected>Select an option</option>
                    <option value="Yes">Yes</option>
                    <option value="No">No</option>
                </select>
            </div>

            <!-- Job Title -->
            <div class="mb-4">
                <label for="job-title" class="form-label">Job Title</label>
                <input type="text" class="form-control" id="job-title" name="job_title"
                    placeholder="Enter your job title">
            </div>

            <!-- Company Name -->
            <div class="mb-4">
                <label for="company-name" class="form-label">Company Name</label>
                <input type="text" class="form-control" id="company-name" name="company_name"
                    placeholder="Enter the company name">
            </div>

            <!-- Job duties -->
            <div class="mb-4">
                <label for="job-duties" class="form-label">Job Duties</label>
                <textarea class="form-control" id="job-duties" name="job_duties" rows="4"
                    placeholder="Enter your job duties"></textarea>
            </div>

            <!-- What institute did you get admitted to in Canada? -->
            <div class="mb-4">
                <label for="admission-institute" class="form-label">What institute did you get admitted to in Canada?
                    <span class="text-danger">*</span></label>
                <input type="text" class="form-control" id="admission-institute" name="admission_institute"
                    placeholder="Enter the institute in Canada" required>
            </div>

            <!-- What is your program of study in Canada? -->
            <div class="mb-4">
                <label for="program-study" class="form-label">What is your program of study in Canada? <span
                        class="text-danger">*</span></label>
                <input type="text" class="form-control" id="program-study" name="program_study"
                    placeholder="Enter your program of study" required>
            </div>

            <!-- Which country are you applying from? -->
            <div class="mb-4">
                <label for="applying-country" class="form-label">Which country are you applying from? <span
                        class="text-danger">*</span></label>
                <input type="text" class="form-control" id="applying-country" name="applying_country"
                    placeholder="Enter your country" required>
            </div>

            <!-- What are your future goals? -->
            <div class="mb-4">
                <label for="future-goals" class="form-label">What are your future goals? <span
                        class="text-danger">*</span></label>
                <textarea class="form-control" id="future-goals" name="future_goals" rows="4"
                    placeholder="Enter your future goals" required></textarea>
            </div>

            <!-- English Scores - Listening -->
            <div class="mb-4">
                <label for="english-listening" class="form-label">English Scores - Listening <span
                        class="text-danger">*</span></label>
                <input type="number" class="form-control" id="english-listening" name="english_listening"
                    placeholder="Enter your listening score" required>
            </div>

            <!-- English Scores - Reading -->
            <div class="mb-4">
                <label for="english-reading" class="form-label">English Scores - Reading <span
                        class="text-danger">*</span></label>
                <input type="number" class="form-control" id="english-reading" name="english_reading"
                    placeholder="Enter your reading score" required>
            </div>

            <!-- English Scores - Speaking -->
            <div class="mb-4">
                <label for="english-speaking" class="form-label">English Scores - Speaking <span
                        class="text-danger">*</span></label>
                <input type="number" class="form-control" id="english-speaking" name="english_speaking"
                    placeholder="Enter your speaking score" required>
            </div>

            <!-- English Scores - Writing -->
            <div class="mb-4">
                <label for="english-writing" class="form-label">English Scores - Writing <span
                        class="text-danger">*</span></label>
                <input type="number" class="form-control" id="english-writing" name="english_writing"
                    placeholder="Enter your writing score" required>
            </div>

            <!-- Did you pay your first year tuition? -->
            <div class="mb-4">
                <label>Did you pay your first year tuition? <span class="text-danger">*</span></label>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="tuition_paid" id="tuition-paid-yes" value="Yes"
                        required>
                    <label class="form-check-label" for="tuition-paid-yes">Yes</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="tuition_paid" id="tuition-paid-no" value="No"
                        required>
                    <label class="form-check-label" for="tuition-paid-no">No</label>
                </div>
            </div>

            <!-- How much tuition fee did you pay? -->
            <div class="mb-4">
                <label for="tuition-fee" class="form-label">How much tuition fee did you pay?</label>
                <input type="number" class="form-control" id="tuition-fee" name="tuition_fee"
                    placeholder="Enter the tuition fee">
            </div>

            <!-- Did you do a GIC? -->
            <div class="mb-4">
                <label>Did you do a GIC?</label>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="gic" id="gic-yes" value="Yes">
                    <label class="form-check-label" for="gic-yes">Yes</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="gic" id="gic-no" value="No">
                    <label class="form-check-label" for="gic-no">No</label>
                </div>
            </div>

            <!-- How much did you pay towards GIC? -->
            <div class="mb-4">
                <label for="gic-fee" class="form-label">How much did you pay towards GIC?</label>
                <input type="number" class="form-control" id="gic-fee" name="gic_fee"
                    placeholder="Enter the GIC amount">
            </div>

            <!-- Submit Button -->
            <button type="submit" class="btn btn-primary submit" name="submit">Submit</button>
        </form>

    </div>

    <!-- Include Bootstrap JS and jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"></script>
    <script>

        $(document).ready(function () {


            const currentURL = window.location.href;

            if (currentURL.includes("success")) {
                $('#success-modal').modal('show');
                const url = new URL(window.location.href);
                url.searchParams.delete('success');
                history.pushState({}, '', url);
            }



            setTimeout(function () {
                $('#success-modal').modal('hide');
            }, 5000);

            $('.btn-close').click(function () {
                $('#success-modal').modal('hide');
            });


            var newElement = $('<div class="loader-container"><div class="loader"></div></div>');

            $('.submit').click(function () {
                $('body').prepend(newElement);
                event.preventDefault();
                var formData = $('#myForm').serialize();
                $.ajax({
                    type: 'POST',
                    url: 'process_form.php',
                    data: formData,
                    success: function (response) {
                        window.location.href = response;
                    },
                    error: function (xhr, status, error) {
                        console.error(xhr.responseText);
                    }
                });

            });
        });
    </script>

</body>

</html>